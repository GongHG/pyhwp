[buildout]
extends = buildout.cfg
develop+= unokit
          pyhwp_uno
          tools/oxt.tool
          tools/discover.lo
parts+= oxt-tool
	oxt-console
	oxt-test
	oxt-pythonpath
	oxt-build
	oxt-install
	console-in-lo
        test-in-lo
	tox-oxt-ini

[test-tools]
eggs+= oxt.tool

[lo]
recipe = discover.lo
search-in-wellknown-places = true
search-in-path = true

[oxt-pythonpath]
recipe = collective.recipe.omelette
eggs = pyhwp_uno
location = oxt/pythonpath

[oxt-tool]
recipe = zc.recipe.egg
eggs = oxt.tool

[oxt-console]
recipe = oxt.tool:console
python = ${lo:uno_python}
soffice = ${lo:soffice}

[oxt-test]
recipe = oxt.tool:test
python = ${lo:uno_python}
soffice = ${lo:soffice}
discover = ${buildout:directory}/pyhwp
	   ${buildout:directory}/pyhwp_uno
           ${buildout:directory}/unokit
extra_path=${oxt-test-eggs:egg-path}
logconf_path=${buildout:directory}/etc/testlog.conf

[oxt-test-eggs]
recipe = egg.path
eggs = pyhwp
       hypua2jamo
       pyhwp-uno
       unokit

[oxt-build]
recipe = collective.recipe.template
input = ${buildout:directory}/misc/oxt-build.in
output = ${buildout:directory}/bin/oxt-build
mode = 755

[oxt-install]
recipe = oxt.tool:installer
unopkg = ${lo:unopkg}

[console-in-lo]
recipe = oxt.tool:console
python = ${lo:uno_python}
soffice = ${lo:soffice}
in_proc = true

[test-in-lo]
recipe = collective.recipe.template
input = ${buildout:directory}/misc/test-in-lo.py
output = ${buildout:directory}/bin/test-in-lo
mode = 755

[tox-oxt-ini]
recipe = collective.recipe.template
input = ${buildout:directory}/tox-oxt.ini.in
output = ${buildout:directory}/tox-oxt.ini
mode = 755
