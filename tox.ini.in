[tox]
toxworkdir={toxinidir}/parts/tox
setupdir={toxinidir}
envlist = py25,py26,py27,jy25,lo

[testenv]
deps=nose
commands=
	{toxinidir}/bin/console {toxinidir}/misc/copylxml.py {envtmpdir}
	python {toxinidir}/pyhwp-xunits/setup.py develop
	nosetests {envtmpdir} {toxinidir}/pyhwp --logging-config={toxinidir}/logging-nosetests.conf
	hwp5-xunits-prepare --fixtures-dir={toxinidir}/pyhwp/hwp5/tests/fixtures
        {toxinidir}/bin/xunit --styles-dir={toxinidir}/pyhwp/hwp5/xsl --import-dir=. --gen-dir={envtmpdir}/gen-xunits {toxinidir}/pyhwp-xunits
changedir={envtmpdir}

[testenv:jy25]
setenv=JYTHONPATH=${java-poi:location}/poi-3.8-20120326.jar
basepython=${jython25:executable}
deps=nose
commands =
	jython -c 'from org.apache.poi.poifs.filesystem import POIFSFileSystem'
	jython {toxinidir}/pyhwp-xunits/setup.py develop
	nosetests {envtmpdir} {toxinidir}/pyhwp --logging-config={toxinidir}/logging-nosetests.conf
	hwp5-xunits-prepare --fixtures-dir={toxinidir}/pyhwp/hwp5/tests/fixtures
        {toxinidir}/bin/xunit --styles-dir={toxinidir}/pyhwp/hwp5/xsl --import-dir=. --gen-dir={envtmpdir}/gen-xunits {toxinidir}/pyhwp-xunits

[testenv:lo]
setenv=PATH={env:PATH}${lo:pathsep}${lo:program}${lo:pathsep}${lo:ure}/bin
       PYTHONPATH=${lo:uno_pythonpath}
basepython=${lo:uno_python}
commands=
	python -c 'import uno, unohelper'
	{toxinidir}/bin/oxt-test {envtmpdir}
deps=discover
changedir={toxinidir}
